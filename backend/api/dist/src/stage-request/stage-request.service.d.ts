import { PrismaService } from '../prisma/prisma.service';
import { Prisma } from '@prisma/client';
import { EmailService } from '../email/email.service';
import { NotificationService } from '../notification/notification.service';
export declare class StageRequestService {
    private prisma;
    private emailService;
    private notificationService;
    private readonly logger;
    constructor(prisma: PrismaService, emailService: EmailService, notificationService: NotificationService);
    private generateTrackingCode;
    createStageRequest(data: any): Promise<{
        success: boolean;
        message: string;
        data: {
            stagiaire: {
                profile: {
                    id: string;
                    userId: string;
                    nom: string;
                    prenom: string;
                    telephone: string | null;
                    avatar: string | null;
                    birthDate: Date | null;
                    school: string | null;
                    major: string | null;
                } | null;
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                email: string;
                passwordHash: string;
                role: import(".prisma/client").$Enums.UserRole;
                isActive: boolean;
                structureId: number | null;
                notifMessages: boolean | null;
                notifEvaluation: boolean | null;
                notifRapports: boolean | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: string;
            type: string;
            departement: string;
            dateDebut: Date;
            dateFin: Date;
            motivation: string;
            competences: string;
            experience: string;
            universite: string;
            domaineEtude: string;
            anneeEtude: string;
            code_suivi: string | null;
            photo: string | null;
            candidate2Email: string | null;
            candidate2Photo: string | null;
            requiresSecondCandidateValidation: boolean;
            secondCandidateValidated: boolean;
            secondCandidateUserId: string | null;
            secondCandidateValidationToken: string | null;
            secondCandidateValidationExpiresAt: Date | null;
            stagiaireId: string;
            cv: string | null;
            lettreMotivation: string | null;
            carteIdentite: string | null;
            inscriptionUniversitaire: string | null;
            recommandation: string | null;
            autresDocuments: Prisma.JsonValue | null;
        };
    }>;
    getStageRequestsByStagiaire(stagiaireId: string): Promise<({
        stagiaire: {
            profile: {
                id: string;
                userId: string;
                nom: string;
                prenom: string;
                telephone: string | null;
                avatar: string | null;
                birthDate: Date | null;
                school: string | null;
                major: string | null;
            } | null;
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            email: string;
            passwordHash: string;
            role: import(".prisma/client").$Enums.UserRole;
            isActive: boolean;
            structureId: number | null;
            notifMessages: boolean | null;
            notifEvaluation: boolean | null;
            notifRapports: boolean | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    })[]>;
    getStageRequestsForDPAF(): Promise<({
        stagiaire: {
            stagiaire: ({
                structure: {
                    id: number;
                    createdAt: Date;
                    updatedAt: Date;
                    type: string | null;
                    nomStructure: string;
                    sigle: string | null;
                    isDeleted: boolean;
                    parentId: number | null;
                } | null;
            } & {
                id: string;
                userId: string;
                structureAffecteeId: number | null;
                serviceAffecteId: number | null;
                tuteurId: string | null;
            }) | null;
            profile: {
                id: string;
                userId: string;
                nom: string;
                prenom: string;
                telephone: string | null;
                avatar: string | null;
                birthDate: Date | null;
                school: string | null;
                major: string | null;
            } | null;
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            email: string;
            passwordHash: string;
            role: import(".prisma/client").$Enums.UserRole;
            isActive: boolean;
            structureId: number | null;
            notifMessages: boolean | null;
            notifEvaluation: boolean | null;
            notifRapports: boolean | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    })[]>;
    getHistoriqueStagiaires(): Promise<({
        stagiaire: {
            stagiaire: ({
                structure: {
                    id: number;
                    createdAt: Date;
                    updatedAt: Date;
                    type: string | null;
                    nomStructure: string;
                    sigle: string | null;
                    isDeleted: boolean;
                    parentId: number | null;
                } | null;
                tuteur: ({
                    user: {
                        profile: {
                            id: string;
                            userId: string;
                            nom: string;
                            prenom: string;
                            telephone: string | null;
                            avatar: string | null;
                            birthDate: Date | null;
                            school: string | null;
                            major: string | null;
                        } | null;
                    } & {
                        id: string;
                        createdAt: Date;
                        updatedAt: Date;
                        email: string;
                        passwordHash: string;
                        role: import(".prisma/client").$Enums.UserRole;
                        isActive: boolean;
                        structureId: number | null;
                        notifMessages: boolean | null;
                        notifEvaluation: boolean | null;
                        notifRapports: boolean | null;
                    };
                } & {
                    id: string;
                    structureId: number | null;
                    userId: string;
                    serviceId: number | null;
                }) | null;
            } & {
                id: string;
                userId: string;
                structureAffecteeId: number | null;
                serviceAffecteId: number | null;
                tuteurId: string | null;
            }) | null;
            profile: {
                id: string;
                userId: string;
                nom: string;
                prenom: string;
                telephone: string | null;
                avatar: string | null;
                birthDate: Date | null;
                school: string | null;
                major: string | null;
            } | null;
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            email: string;
            passwordHash: string;
            role: import(".prisma/client").$Enums.UserRole;
            isActive: boolean;
            structureId: number | null;
            notifMessages: boolean | null;
            notifEvaluation: boolean | null;
            notifRapports: boolean | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    })[]>;
    approveStageRequest(requestId: string): Promise<{
        success: boolean;
        message: string;
        data: {
            stagiaire: {
                profile: {
                    id: string;
                    userId: string;
                    nom: string;
                    prenom: string;
                    telephone: string | null;
                    avatar: string | null;
                    birthDate: Date | null;
                    school: string | null;
                    major: string | null;
                } | null;
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                email: string;
                passwordHash: string;
                role: import(".prisma/client").$Enums.UserRole;
                isActive: boolean;
                structureId: number | null;
                notifMessages: boolean | null;
                notifEvaluation: boolean | null;
                notifRapports: boolean | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: string;
            type: string;
            departement: string;
            dateDebut: Date;
            dateFin: Date;
            motivation: string;
            competences: string;
            experience: string;
            universite: string;
            domaineEtude: string;
            anneeEtude: string;
            code_suivi: string | null;
            photo: string | null;
            candidate2Email: string | null;
            candidate2Photo: string | null;
            requiresSecondCandidateValidation: boolean;
            secondCandidateValidated: boolean;
            secondCandidateUserId: string | null;
            secondCandidateValidationToken: string | null;
            secondCandidateValidationExpiresAt: Date | null;
            stagiaireId: string;
            cv: string | null;
            lettreMotivation: string | null;
            carteIdentite: string | null;
            inscriptionUniversitaire: string | null;
            recommandation: string | null;
            autresDocuments: Prisma.JsonValue | null;
        };
    }>;
    rejectStageRequest(requestId: string, motif: string): Promise<{
        success: boolean;
        message: string;
        data: {
            stagiaire: {
                profile: {
                    id: string;
                    userId: string;
                    nom: string;
                    prenom: string;
                    telephone: string | null;
                    avatar: string | null;
                    birthDate: Date | null;
                    school: string | null;
                    major: string | null;
                } | null;
            } & {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                email: string;
                passwordHash: string;
                role: import(".prisma/client").$Enums.UserRole;
                isActive: boolean;
                structureId: number | null;
                notifMessages: boolean | null;
                notifEvaluation: boolean | null;
                notifRapports: boolean | null;
            };
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            status: string;
            type: string;
            departement: string;
            dateDebut: Date;
            dateFin: Date;
            motivation: string;
            competences: string;
            experience: string;
            universite: string;
            domaineEtude: string;
            anneeEtude: string;
            code_suivi: string | null;
            photo: string | null;
            candidate2Email: string | null;
            candidate2Photo: string | null;
            requiresSecondCandidateValidation: boolean;
            secondCandidateValidated: boolean;
            secondCandidateUserId: string | null;
            secondCandidateValidationToken: string | null;
            secondCandidateValidationExpiresAt: Date | null;
            stagiaireId: string;
            cv: string | null;
            lettreMotivation: string | null;
            carteIdentite: string | null;
            inscriptionUniversitaire: string | null;
            recommandation: string | null;
            autresDocuments: Prisma.JsonValue | null;
        };
    }>;
    getStatistics(): Promise<{
        nouveaux: number;
        enCours: number;
        confirmes: number;
        refuses: number;
        total: number;
    }>;
    getRecentStageRequests(): Promise<{
        id: string;
        nom: string;
        email: string;
        structure: string;
        typeStage: string;
        dateSoumission: Date;
        status: string;
        code_suivi: string | null;
    }[]>;
    findStageRequestByTrackingCodeAndEmail(code_suivi: string, email: string): Promise<{
        stagiaire: {
            profile: {
                id: string;
                userId: string;
                nom: string;
                prenom: string;
                telephone: string | null;
                avatar: string | null;
                birthDate: Date | null;
                school: string | null;
                major: string | null;
            } | null;
            structure: {
                id: number;
                createdAt: Date;
                updatedAt: Date;
                type: string | null;
                nomStructure: string;
                sigle: string | null;
                isDeleted: boolean;
                parentId: number | null;
            } | null;
        } & {
            id: string;
            createdAt: Date;
            updatedAt: Date;
            email: string;
            passwordHash: string;
            role: import(".prisma/client").$Enums.UserRole;
            isActive: boolean;
            structureId: number | null;
            notifMessages: boolean | null;
            notifEvaluation: boolean | null;
            notifRapports: boolean | null;
        };
    } & {
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    }>;
    findById(id: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    } | null>;
    updateDocuments(id: string, files: any): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    }>;
    validateSecondCandidate(requestId: string, validator: {
        userId: string;
        email: string;
    }): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    }>;
    getSecondCandidateSummary(requestId: string, opts: {
        token?: string;
        userEmail?: string;
    }): Promise<{
        id: string;
        codeSuivi: string | null;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        universite: string;
        domaineEtude: string;
        stagiaire: string;
        candidate2Email: string | null;
        secondCandidateValidated: boolean;
        requiresSecondCandidateValidation: true;
    }>;
    refuseSecondCandidate(requestId: string, validator: {
        userId: string;
        email: string;
    }): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    }>;
    updateCandidate2Photo(requestId: string, file?: any): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        status: string;
        type: string;
        departement: string;
        dateDebut: Date;
        dateFin: Date;
        motivation: string;
        competences: string;
        experience: string;
        universite: string;
        domaineEtude: string;
        anneeEtude: string;
        code_suivi: string | null;
        photo: string | null;
        candidate2Email: string | null;
        candidate2Photo: string | null;
        requiresSecondCandidateValidation: boolean;
        secondCandidateValidated: boolean;
        secondCandidateUserId: string | null;
        secondCandidateValidationToken: string | null;
        secondCandidateValidationExpiresAt: Date | null;
        stagiaireId: string;
        cv: string | null;
        lettreMotivation: string | null;
        carteIdentite: string | null;
        inscriptionUniversitaire: string | null;
        recommandation: string | null;
        autresDocuments: Prisma.JsonValue | null;
    }>;
}
