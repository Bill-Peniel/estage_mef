import{_ as k,c as n,o as u,b as e,i as c,e as d,t as o,h as x,v as f,F as b,j as p,n as y,l as h}from"./index-C-Ksv_Lv.js";const _={name:"Structures",data(){return{showAddModal:!1,showEditModal:!1,showSubStructureModal:!1,structures:[],filteredStructures:[],searchQuery:"",newStructure:{nomStructure:"",sigle:""},editingStructure:{id:null,nomStructure:"",sigle:""},newSubStructure:{nomStructure:"",sigle:"",parentId:null},error:null,success:null,showDetailsModal:!1,selectedStructure:null,formData:{nomStructure:"",sigle:"",parentId:null},isEditing:!1,loading:!1,currentPage:1,itemsPerPage:15,subStructuresSearch:"",subStructuresPage:1,tuteursSearch:"",tuteursPage:1,stagiairesSearch:"",stagiairesPage:1}},computed:{totalPages(){return Math.ceil(this.filteredStructures.length/this.itemsPerPage)},startIndex(){return(this.currentPage-1)*this.itemsPerPage},endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.filteredStructures.length)},paginatedStructures(){return this.filteredStructures.slice(this.startIndex,this.endIndex)},displayedPages(){return this.getDisplayedPages(this.totalPages,this.currentPage)},filteredSubStructures(){var t,a;if(!this.subStructuresSearch)return((t=this.selectedStructure)==null?void 0:t.children)||[];const i=this.subStructuresSearch.toLowerCase();return(((a=this.selectedStructure)==null?void 0:a.children)||[]).filter(g=>g.nomStructure.toLowerCase().includes(i)||g.sigle.toLowerCase().includes(i))},totalSubStructuresPages(){return Math.ceil(this.filteredSubStructures.length/this.itemsPerPage)},subStructuresStartIndex(){return(this.subStructuresPage-1)*this.itemsPerPage},subStructuresEndIndex(){return Math.min(this.subStructuresStartIndex+this.itemsPerPage,this.filteredSubStructures.length)},paginatedSubStructures(){return this.filteredSubStructures.slice(this.subStructuresStartIndex,this.subStructuresEndIndex)},displayedSubStructuresPages(){return this.getDisplayedPages(this.totalSubStructuresPages,this.subStructuresPage)},filteredTuteurs(){var t,a;if(!this.tuteursSearch)return((t=this.selectedStructure)==null?void 0:t.tuteurs)||[];const i=this.tuteursSearch.toLowerCase();return(((a=this.selectedStructure)==null?void 0:a.tuteurs)||[]).filter(g=>g.user.profile.nom.toLowerCase().includes(i)||g.user.profile.prenom.toLowerCase().includes(i)||g.user.email.toLowerCase().includes(i))},totalTuteursPages(){return Math.ceil(this.filteredTuteurs.length/this.itemsPerPage)},tuteursStartIndex(){return(this.tuteursPage-1)*this.itemsPerPage},tuteursEndIndex(){return Math.min(this.tuteursStartIndex+this.itemsPerPage,this.filteredTuteurs.length)},paginatedTuteurs(){return this.filteredTuteurs.slice(this.tuteursStartIndex,this.tuteursEndIndex)},displayedTuteursPages(){return this.getDisplayedPages(this.totalTuteursPages,this.tuteursPage)},filteredStagiaires(){var t,a;if(!this.stagiairesSearch)return((t=this.selectedStructure)==null?void 0:t.stagiaires)||[];const i=this.stagiairesSearch.toLowerCase();return(((a=this.selectedStructure)==null?void 0:a.stagiaires)||[]).filter(g=>g.user.profile.nom.toLowerCase().includes(i)||g.user.profile.prenom.toLowerCase().includes(i)||g.user.email.toLowerCase().includes(i))},totalStagiairesPages(){return Math.ceil(this.filteredStagiaires.length/this.itemsPerPage)},stagiairesStartIndex(){return(this.stagiairesPage-1)*this.itemsPerPage},stagiairesEndIndex(){return Math.min(this.stagiairesStartIndex+this.itemsPerPage,this.filteredStagiaires.length)},paginatedStagiaires(){return this.filteredStagiaires.slice(this.stagiairesStartIndex,this.stagiairesEndIndex)},displayedStagiairesPages(){return this.getDisplayedPages(this.totalStagiairesPages,this.stagiairesPage)}},watch:{currentPage(){window.scrollTo({top:0,behavior:"smooth"})},searchQuery(){this.currentPage=1,this.filterStructures()},structures:{immediate:!0,handler(){this.filterStructures()}},subStructuresSearch(){this.subStructuresPage=1},tuteursSearch(){this.tuteursPage=1},stagiairesSearch(){this.stagiairesPage=1}},methods:{filterStructures(){if(!this.searchQuery){this.filteredStructures=[...this.structures];return}const i=this.searchQuery.toLowerCase();this.filteredStructures=this.structures.filter(t=>t.nomStructure.toLowerCase().includes(i)||t.sigle.toLowerCase().includes(i))},async submitStructure(){try{this.error=null,this.success=null;const i=await fetch("http://localhost:3002/api/structures",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(this.newStructure)}),t=await i.json();i.ok?(this.success="Structure ajoutée avec succès",await this.fetchStructures(),this.showAddModal=!1,this.newStructure={nomStructure:"",sigle:""}):(this.error=t.message||"Erreur lors de la création de la structure",console.error("Erreur lors de la création de la structure:",t))}catch(i){this.error="Erreur de connexion au serveur",console.error("Erreur lors de la création de la structure:",i)}},async fetchStructures(){try{console.log("Tentative de récupération des structures...");const i=await fetch("http://localhost:3002/api/structures",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(i.ok){const t=await i.json();console.log("Structures reçues du backend:",t),this.structures=t,this.filterStructures()}else{console.error("Erreur lors de la récupération des structures:",i.status);const t=await i.json();console.error("Détails de l'erreur:",t)}}catch(i){console.error("Erreur lors de la récupération des structures:",i)}},editStructure(i){this.editingStructure={id:i.id,nomStructure:i.nomStructure,sigle:i.sigle},this.showEditModal=!0},async updateStructure(){try{this.error=null,this.success=null;const i=await fetch(`http://localhost:3002/api/structures/${this.editingStructure.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({nomStructure:this.editingStructure.nomStructure,sigle:this.editingStructure.sigle})}),t=await i.json();i.ok?(this.success="Structure modifiée avec succès",await this.fetchStructures(),this.showEditModal=!1,this.editingStructure={id:null,nomStructure:"",sigle:""}):this.error=t.message||"Erreur lors de la modification de la structure"}catch(i){this.error="Erreur de connexion au serveur",console.error("Erreur lors de la modification de la structure:",i)}},async deleteStructure(i){if(confirm("Êtes-vous sûr de vouloir supprimer cette structure ?"))try{(await fetch(`http://localhost:3002/api/structures/${i}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&await this.fetchStructures()}catch(t){console.error("Erreur lors de la suppression de la structure:",t)}},viewStructure(i){this.selectedStructure=i,this.showDetailsModal=!0},formatDate(i){return i?new Date(i).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},openAddSubStructureModal(){this.newSubStructure={nomStructure:"",sigle:"",parentId:this.selectedStructure.id},this.showSubStructureModal=!0},async submitSubStructure(){try{this.error=null,this.success=null;const i=await fetch("http://localhost:3002/api/structures",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(this.newSubStructure)}),t=await i.json();i.ok?(this.success="Sous-structure ajoutée avec succès",await this.fetchStructures(),this.showSubStructureModal=!1,this.newSubStructure={nomStructure:"",sigle:"",parentId:null}):(this.error=t.message||"Erreur lors de la création de la sous-structure",console.error("Erreur lors de la création de la sous-structure:",t))}catch(i){this.error="Erreur de connexion au serveur",console.error("Erreur lors de la création de la sous-structure:",i)}},getDisplayedPages(i,t){const a=[];if(i<=5)for(let s=1;s<=i;s++)a.push(s);else if(t<=3)for(let s=1;s<=5;s++)a.push(s);else if(t>=i-2)for(let s=i-4;s<=i;s++)a.push(s);else for(let s=t-2;s<=t+2;s++)a.push(s);return a}},mounted(){this.fetchStructures()}},C={class:"min-h-screen bg-gray-100 top-10 md:top-16 lg:top-16 relative z-0"},j={class:"flex-1"},I={class:"bg-white shadow sticky top-0 z-20"},E={class:"px-4 py-4 flex flex-col sm:flex-row justify-between items-center gap-2"},M={class:"p-2 sm:p-6 overflow-x-hidden"},A={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},T={key:1,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded"},D={class:"mb-4"},z={class:"relative"},L={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},V={class:"bg-white shadow rounded-lg hidden md:block"},N={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},B={class:"px-6 py-4 whitespace-nowrap"},Q={class:"text-sm font-medium text-gray-900"},O={class:"px-6 py-4 whitespace-nowrap"},R={class:"text-sm text-gray-900"},F={class:"px-6 py-4 whitespace-nowrap"},J={class:"text-sm text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium flex gap-2"},H=["onClick"],K=["onClick"],W=["onClick"],X={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Y={class:"flex-1 flex justify-between sm:hidden"},Z=["disabled"],$=["disabled"],ee={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},te={class:"text-sm text-gray-700"},se={class:"font-medium"},re={class:"font-medium"},ie={class:"font-medium"},le={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},oe=["disabled"],ne=["onClick"],ue=["disabled"],de={class:"md:hidden space-y-4"},ae={class:"flex items-center justify-between mb-2"},ce={class:"font-semibold text-gray-900"},ge={class:"flex items-center text-gray-700 text-sm mb-1"},me={class:"flex items-center gap-2 mt-2"},xe=["onClick"],fe=["onClick"],be=["onClick"],pe={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200"},ye=["disabled"],he={class:"text-sm text-gray-700"},ve=["disabled"],Se={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center"},we={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Pe={class:"p-6"},ke={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},_e={class:"gap-4"},Ce={class:"w-full"},je={class:"w-full"},Ie={class:"mt-6 flex justify-end space-x-3"},Ee={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Me={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"},Ae={class:"flex justify-between items-center mb-4"},Te={class:"mb-6"},De={class:"grid grid-cols-2 gap-4"},ze={class:"text-sm font-medium"},Le={class:"text-sm font-medium"},Ve={class:"text-sm font-medium"},Ne={class:"text-sm font-medium"},qe={class:"mb-6"},Ue={class:"flex justify-between items-center mb-2"},Be={class:"mb-4"},Qe={class:"relative"},Oe={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},Re={class:"overflow-x-auto"},Fe={class:"min-w-full divide-y divide-gray-200"},Je={class:"bg-white divide-y divide-gray-200"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},We=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},$e={class:"flex-1 flex justify-between sm:hidden"},et=["disabled"],tt=["disabled"],st={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},rt={class:"text-sm text-gray-700"},it={class:"font-medium"},lt={class:"font-medium"},ot={class:"font-medium"},nt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ut=["disabled"],dt=["onClick"],at=["disabled"],ct={class:"mb-6"},gt={class:"mb-4"},mt={class:"relative"},xt={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},ft={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},pt={class:"bg-white divide-y divide-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},St={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},wt={class:"flex-1 flex justify-between sm:hidden"},Pt=["disabled"],kt=["disabled"],_t={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ct={class:"text-sm text-gray-700"},jt={class:"font-medium"},It={class:"font-medium"},Et={class:"font-medium"},Mt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},At=["disabled"],Tt=["onClick"],Dt=["disabled"],zt={class:"mb-6"},Lt={class:"mb-4"},Vt={class:"relative"},Nt={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},qt={class:"overflow-x-auto"},Ut={class:"min-w-full divide-y divide-gray-200"},Bt={class:"bg-white divide-y divide-gray-200"},Qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jt={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Gt={class:"flex-1 flex justify-between sm:hidden"},Ht=["disabled"],Kt=["disabled"],Wt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Xt={class:"text-sm text-gray-700"},Yt={class:"font-medium"},Zt={class:"font-medium"},$t={class:"font-medium"},es={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ts=["disabled"],ss=["onClick"],rs=["disabled"],is={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50"},ls={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},os={class:"p-6"},ns={class:"flex justify-between items-center mb-4"},us={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},ds={class:"grid grid-cols-1 gap-4"},as={class:"w-full"},cs={class:"w-full"},gs={class:"mt-6 flex justify-end space-x-3"},ms={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center"},xs={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},fs={class:"p-6"},bs={key:0,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded"},ps={class:"grid grid-cols-2 gap-4"},ys={class:"w-full"},hs={class:"w-full"},vs={class:"mt-6 flex justify-end space-x-3"};function Ss(i,t,a,g,s,l){var v,S,w,P;return u(),n("div",C,[e("div",j,[e("header",I,[e("div",E,[t[43]||(t[43]=e("h1",{class:"text-2xl font-bold text-primary text-center sm:text-left"},"Gestion des structures",-1)),e("button",{onClick:t[0]||(t[0]=r=>s.showAddModal=!0),class:"bg-primary text-white px-4 py-2 rounded hover:bg-green-900 w-full sm:w-auto"},t[42]||(t[42]=[e("i",{class:"fas fa-plus mr-2"},null,-1),d(" Ajouter une structure ")]))])]),e("main",M,[s.error?(u(),n("div",A,o(s.error),1)):c("",!0),s.success?(u(),n("div",T,o(s.success),1)):c("",!0),e("div",D,[e("div",z,[t[45]||(t[45]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.searchQuery=r),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Rechercher une structure par nom ou sigle..."},null,512),[[f,s.searchQuery]]),s.searchQuery?(u(),n("div",L,[e("button",{onClick:t[2]||(t[2]=r=>s.searchQuery=""),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[44]||(t[44]=[e("i",{class:"fas fa-times"},null,-1)]))])):c("",!0)])]),e("div",V,[e("div",N,[e("table",q,[t[49]||(t[49]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sigle"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",U,[(u(!0),n(b,null,p(l.paginatedStructures,r=>(u(),n("tr",{key:r.id},[e("td",B,[e("div",Q,o(r.nomStructure),1)]),e("td",O,[e("div",R,o(r.sigle),1)]),e("td",F,[e("div",J,[e("span",{class:y(["px-2 py-1 text-xs font-semibold rounded-full",r.parentId?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},o(r.parentId?"Sous-structure":"Structure"),3)])]),e("td",G,[e("button",{onClick:m=>l.viewStructure(r),class:"text-primary hover:text-primary-dark",title:"Voir"},t[46]||(t[46]=[e("i",{class:"fas fa-eye"},null,-1)]),8,H),e("button",{onClick:m=>l.editStructure(r),class:"text-primary hover:text-primary-dark",title:"Modifier"},t[47]||(t[47]=[e("i",{class:"fas fa-edit"},null,-1)]),8,K),e("button",{onClick:m=>l.deleteStructure(r.id),class:"text-danger hover:text-red-700",title:"Supprimer"},t[48]||(t[48]=[e("i",{class:"fas fa-trash"},null,-1)]),8,W)])]))),128))])])]),e("div",X,[e("div",Y,[e("button",{onClick:t[3]||(t[3]=r=>s.currentPage--),disabled:s.currentPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Précédent ",8,Z),e("button",{onClick:t[4]||(t[4]=r=>s.currentPage++),disabled:s.currentPage===l.totalPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Suivant ",8,$)]),e("div",ee,[e("div",null,[e("p",te,[t[50]||(t[50]=d(" Affichage de ")),e("span",se,o(l.startIndex+1),1),t[51]||(t[51]=d(" à ")),e("span",re,o(l.endIndex),1),t[52]||(t[52]=d(" sur ")),e("span",ie,o(s.structures.length),1),t[53]||(t[53]=d(" structures "))])]),e("div",null,[e("nav",le,[e("button",{onClick:t[5]||(t[5]=r=>s.currentPage--),disabled:s.currentPage===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[54]||(t[54]=[e("span",{class:"sr-only"},"Précédent",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,oe),(u(!0),n(b,null,p(l.displayedPages,r=>(u(),n("button",{key:r,onClick:m=>s.currentPage=r,class:y(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.currentPage===r?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},o(r),11,ne))),128)),e("button",{onClick:t[6]||(t[6]=r=>s.currentPage++),disabled:s.currentPage===l.totalPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[55]||(t[55]=[e("span",{class:"sr-only"},"Suivant",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,ue)])])])])]),e("div",de,[(u(!0),n(b,null,p(l.paginatedStructures,r=>(u(),n("div",{key:r.id,class:"bg-white rounded-lg shadow p-4 flex flex-col gap-2"},[e("div",ae,[e("span",ce,o(r.nomStructure),1),e("span",{class:y(["px-2 py-1 text-xs font-semibold rounded-full",r.parentId?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},o(r.parentId?"Sous-structure":"Structure"),3)]),e("div",ge,[t[56]||(t[56]=e("i",{class:"fas fa-building mr-1 text-primary"},null,-1)),e("span",null,o(r.sigle),1)]),e("div",me,[e("button",{onClick:m=>l.viewStructure(r),class:"text-primary hover:text-primary-dark",title:"Voir"},t[57]||(t[57]=[e("i",{class:"fas fa-eye"},null,-1)]),8,xe),e("button",{onClick:m=>l.editStructure(r),class:"text-primary hover:text-primary-dark",title:"Modifier"},t[58]||(t[58]=[e("i",{class:"fas fa-edit"},null,-1)]),8,fe),e("button",{onClick:m=>l.deleteStructure(r.id),class:"text-danger hover:text-red-700",title:"Supprimer"},t[59]||(t[59]=[e("i",{class:"fas fa-trash"},null,-1)]),8,be)])]))),128)),e("div",pe,[e("button",{onClick:t[7]||(t[7]=r=>s.currentPage--),disabled:s.currentPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Précédent ",8,ye),e("span",he,"Page "+o(s.currentPage)+" / "+o(l.totalPages),1),e("button",{onClick:t[8]||(t[8]=r=>s.currentPage++),disabled:s.currentPage===l.totalPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Suivant ",8,ve)])])]),s.showAddModal?(u(),n("div",Se,[e("div",we,[e("div",Pe,[t[63]||(t[63]=e("h2",{class:"text-xl font-bold mb-4"},"Ajouter une structure",-1)),e("form",{onSubmit:t[12]||(t[12]=h((...r)=>l.submitStructure&&l.submitStructure(...r),["prevent"]))},[s.error?(u(),n("div",ke,o(s.error),1)):c("",!0),e("div",_e,[e("div",Ce,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sigle",-1)),x(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.newStructure.sigle=r),type:"text",class:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.newStructure.sigle]])]),e("div",je,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la structure",-1)),x(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.newStructure.nomStructure=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.newStructure.nomStructure]])])]),e("div",Ie,[e("button",{type:"button",onClick:t[11]||(t[11]=r=>s.showAddModal=!1),class:"btn-outline"}," Annuler "),t[62]||(t[62]=e("button",{type:"submit",class:"btn-primary"}," Ajouter ",-1))])],32)])])])):c("",!0),s.showDetailsModal?(u(),n("div",Ee,[e("div",Me,[e("div",Ae,[t[65]||(t[65]=e("h3",{class:"text-lg font-medium text-gray-900"},"Détails de la structure",-1)),e("button",{onClick:t[13]||(t[13]=r=>s.showDetailsModal=!1),class:"text-gray-400 hover:text-gray-500"},t[64]||(t[64]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Te,[t[70]||(t[70]=e("h4",{class:"text-md font-medium text-gray-700 mb-2"},"Informations générales",-1)),e("div",De,[e("div",null,[t[66]||(t[66]=e("p",{class:"text-sm text-gray-600"},"Nom de la structure",-1)),e("p",ze,o((v=s.selectedStructure)==null?void 0:v.nomStructure),1)]),e("div",null,[t[67]||(t[67]=e("p",{class:"text-sm text-gray-600"},"Sigle",-1)),e("p",Le,o((S=s.selectedStructure)==null?void 0:S.sigle),1)]),e("div",null,[t[68]||(t[68]=e("p",{class:"text-sm text-gray-600"},"Date de création",-1)),e("p",Ve,o(l.formatDate((w=s.selectedStructure)==null?void 0:w.createdAt)),1)]),e("div",null,[t[69]||(t[69]=e("p",{class:"text-sm text-gray-600"},"Dernière mise à jour",-1)),e("p",Ne,o(l.formatDate((P=s.selectedStructure)==null?void 0:P.updatedAt)),1)])])]),e("div",qe,[e("div",Ue,[t[72]||(t[72]=e("h4",{class:"text-md font-medium text-gray-700"},"Sous-structures",-1)),e("button",{onClick:t[14]||(t[14]=(...r)=>l.openAddSubStructureModal&&l.openAddSubStructureModal(...r)),class:"text-primary hover:text-primary-dark"},t[71]||(t[71]=[e("i",{class:"fas fa-plus"},null,-1),d(" Ajouter une sous-structure ")]))]),e("div",Be,[e("div",Qe,[t[74]||(t[74]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),x(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>s.subStructuresSearch=r),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Rechercher une sous-structure..."},null,512),[[f,s.subStructuresSearch]]),s.subStructuresSearch?(u(),n("div",Oe,[e("button",{onClick:t[16]||(t[16]=r=>s.subStructuresSearch=""),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[73]||(t[73]=[e("i",{class:"fas fa-times"},null,-1)]))])):c("",!0)])]),e("div",Re,[e("table",Fe,[t[78]||(t[78]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sigle"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Je,[(u(!0),n(b,null,p(l.paginatedSubStructures,r=>(u(),n("tr",{key:r.id},[e("td",Ge,o(r.nomStructure),1),e("td",He,o(r.sigle),1),e("td",Ke,[e("button",{onClick:m=>l.viewStructure(r),class:"text-primary hover:text-primary-dark mr-3"},t[75]||(t[75]=[e("i",{class:"fas fa-eye"},null,-1)]),8,We),e("button",{onClick:m=>l.editStructure(r),class:"text-primary hover:text-primary-dark mr-3"},t[76]||(t[76]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Xe),e("button",{onClick:m=>l.deleteStructure(r.id),class:"text-danger hover:text-red-700"},t[77]||(t[77]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Ye)])]))),128))])])]),e("div",Ze,[e("div",$e,[e("button",{onClick:t[17]||(t[17]=r=>s.subStructuresPage--),disabled:s.subStructuresPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Précédent ",8,et),e("button",{onClick:t[18]||(t[18]=r=>s.subStructuresPage++),disabled:s.subStructuresPage===l.totalSubStructuresPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Suivant ",8,tt)]),e("div",st,[e("div",null,[e("p",rt,[t[79]||(t[79]=d(" Affichage de ")),e("span",it,o(l.subStructuresStartIndex+1),1),t[80]||(t[80]=d(" à ")),e("span",lt,o(l.subStructuresEndIndex),1),t[81]||(t[81]=d(" sur ")),e("span",ot,o(l.filteredSubStructures.length),1),t[82]||(t[82]=d(" sous-structures "))])]),e("div",null,[e("nav",nt,[e("button",{onClick:t[19]||(t[19]=r=>s.subStructuresPage--),disabled:s.subStructuresPage===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[83]||(t[83]=[e("span",{class:"sr-only"},"Précédent",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,ut),(u(!0),n(b,null,p(l.displayedSubStructuresPages,r=>(u(),n("button",{key:r,onClick:m=>s.subStructuresPage=r,class:y(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.subStructuresPage===r?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},o(r),11,dt))),128)),e("button",{onClick:t[20]||(t[20]=r=>s.subStructuresPage++),disabled:s.subStructuresPage===l.totalSubStructuresPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[84]||(t[84]=[e("span",{class:"sr-only"},"Suivant",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,at)])])])])]),e("div",ct,[t[94]||(t[94]=e("h4",{class:"text-md font-medium text-gray-700 mb-2"},"Tuteurs",-1)),e("div",gt,[e("div",mt,[t[86]||(t[86]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),x(e("input",{"onUpdate:modelValue":t[21]||(t[21]=r=>s.tuteursSearch=r),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Rechercher un tuteur..."},null,512),[[f,s.tuteursSearch]]),s.tuteursSearch?(u(),n("div",xt,[e("button",{onClick:t[22]||(t[22]=r=>s.tuteursSearch=""),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[85]||(t[85]=[e("i",{class:"fas fa-times"},null,-1)]))])):c("",!0)])]),e("div",ft,[e("table",bt,[t[87]||(t[87]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prénom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email")])],-1)),e("tbody",pt,[(u(!0),n(b,null,p(l.paginatedTuteurs,r=>(u(),n("tr",{key:r.id},[e("td",yt,o(r.user.profile.nom),1),e("td",ht,o(r.user.profile.prenom),1),e("td",vt,o(r.user.email),1)]))),128))])])]),e("div",St,[e("div",wt,[e("button",{onClick:t[23]||(t[23]=r=>s.tuteursPage--),disabled:s.tuteursPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Précédent ",8,Pt),e("button",{onClick:t[24]||(t[24]=r=>s.tuteursPage++),disabled:s.tuteursPage===l.totalTuteursPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Suivant ",8,kt)]),e("div",_t,[e("div",null,[e("p",Ct,[t[88]||(t[88]=d(" Affichage de ")),e("span",jt,o(l.tuteursStartIndex+1),1),t[89]||(t[89]=d(" à ")),e("span",It,o(l.tuteursEndIndex),1),t[90]||(t[90]=d(" sur ")),e("span",Et,o(l.filteredTuteurs.length),1),t[91]||(t[91]=d(" tuteurs "))])]),e("div",null,[e("nav",Mt,[e("button",{onClick:t[25]||(t[25]=r=>s.tuteursPage--),disabled:s.tuteursPage===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[92]||(t[92]=[e("span",{class:"sr-only"},"Précédent",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,At),(u(!0),n(b,null,p(l.displayedTuteursPages,r=>(u(),n("button",{key:r,onClick:m=>s.tuteursPage=r,class:y(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.tuteursPage===r?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},o(r),11,Tt))),128)),e("button",{onClick:t[26]||(t[26]=r=>s.tuteursPage++),disabled:s.tuteursPage===l.totalTuteursPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[93]||(t[93]=[e("span",{class:"sr-only"},"Suivant",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Dt)])])])])]),e("div",zt,[t[104]||(t[104]=e("h4",{class:"text-md font-medium text-gray-700 mb-2"},"Stagiaires",-1)),e("div",Lt,[e("div",Vt,[t[96]||(t[96]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),x(e("input",{"onUpdate:modelValue":t[27]||(t[27]=r=>s.stagiairesSearch=r),type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Rechercher un stagiaire..."},null,512),[[f,s.stagiairesSearch]]),s.stagiairesSearch?(u(),n("div",Nt,[e("button",{onClick:t[28]||(t[28]=r=>s.stagiairesSearch=""),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[95]||(t[95]=[e("i",{class:"fas fa-times"},null,-1)]))])):c("",!0)])]),e("div",qt,[e("table",Ut,[t[97]||(t[97]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prénom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tuteur")])],-1)),e("tbody",Bt,[(u(!0),n(b,null,p(l.paginatedStagiaires,r=>(u(),n("tr",{key:r.id},[e("td",Qt,o(r.user.profile.nom),1),e("td",Ot,o(r.user.profile.prenom),1),e("td",Rt,o(r.user.email),1),e("td",Ft,o(r.tuteur?`${r.tuteur.user.profile.prenom} ${r.tuteur.user.profile.nom}`:"-"),1)]))),128))])])]),e("div",Jt,[e("div",Gt,[e("button",{onClick:t[29]||(t[29]=r=>s.stagiairesPage--),disabled:s.stagiairesPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Précédent ",8,Ht),e("button",{onClick:t[30]||(t[30]=r=>s.stagiairesPage++),disabled:s.stagiairesPage===l.totalStagiairesPages,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Suivant ",8,Kt)]),e("div",Wt,[e("div",null,[e("p",Xt,[t[98]||(t[98]=d(" Affichage de ")),e("span",Yt,o(l.stagiairesStartIndex+1),1),t[99]||(t[99]=d(" à ")),e("span",Zt,o(l.stagiairesEndIndex),1),t[100]||(t[100]=d(" sur ")),e("span",$t,o(l.filteredStagiaires.length),1),t[101]||(t[101]=d(" stagiaires "))])]),e("div",null,[e("nav",es,[e("button",{onClick:t[31]||(t[31]=r=>s.stagiairesPage--),disabled:s.stagiairesPage===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[102]||(t[102]=[e("span",{class:"sr-only"},"Précédent",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,ts),(u(!0),n(b,null,p(l.displayedStagiairesPages,r=>(u(),n("button",{key:r,onClick:m=>s.stagiairesPage=r,class:y(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.stagiairesPage===r?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},o(r),11,ss))),128)),e("button",{onClick:t[32]||(t[32]=r=>s.stagiairesPage++),disabled:s.stagiairesPage===l.totalStagiairesPages,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},t[103]||(t[103]=[e("span",{class:"sr-only"},"Suivant",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,rs)])])])])])])])):c("",!0),s.showSubStructureModal?(u(),n("div",is,[e("div",ls,[e("div",os,[e("div",ns,[t[106]||(t[106]=e("h2",{class:"text-xl font-bold"},"Ajouter une sous-structure",-1)),e("button",{onClick:t[33]||(t[33]=r=>s.showSubStructureModal=!1),class:"text-gray-400 hover:text-gray-500"},t[105]||(t[105]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:t[37]||(t[37]=h((...r)=>l.submitSubStructure&&l.submitSubStructure(...r),["prevent"]))},[s.error?(u(),n("div",us,o(s.error),1)):c("",!0),e("div",ds,[e("div",as,[t[107]||(t[107]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la sous-structure",-1)),x(e("input",{"onUpdate:modelValue":t[34]||(t[34]=r=>s.newSubStructure.nomStructure=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.newSubStructure.nomStructure]])]),e("div",cs,[t[108]||(t[108]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sigle",-1)),x(e("input",{"onUpdate:modelValue":t[35]||(t[35]=r=>s.newSubStructure.sigle=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.newSubStructure.sigle]])])]),e("div",gs,[e("button",{type:"button",onClick:t[36]||(t[36]=r=>s.showSubStructureModal=!1),class:"btn-outline"}," Annuler "),t[109]||(t[109]=e("button",{type:"submit",class:"btn-primary"}," Ajouter ",-1))])],32)])])])):c("",!0),s.showEditModal?(u(),n("div",ms,[e("div",xs,[e("div",fs,[t[113]||(t[113]=e("h2",{class:"text-xl font-bold mb-4"},"Modifier la structure",-1)),e("form",{onSubmit:t[41]||(t[41]=h((...r)=>l.updateStructure&&l.updateStructure(...r),["prevent"]))},[s.error?(u(),n("div",bs,o(s.error),1)):c("",!0),e("div",ps,[e("div",ys,[t[110]||(t[110]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la structure",-1)),x(e("input",{"onUpdate:modelValue":t[38]||(t[38]=r=>s.editingStructure.nomStructure=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.editingStructure.nomStructure]])]),e("div",hs,[t[111]||(t[111]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sigle",-1)),x(e("input",{"onUpdate:modelValue":t[39]||(t[39]=r=>s.editingStructure.sigle=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:""},null,512),[[f,s.editingStructure.sigle]])])]),e("div",vs,[e("button",{type:"button",onClick:t[40]||(t[40]=r=>s.showEditModal=!1),class:"btn-outline"}," Annuler "),t[112]||(t[112]=e("button",{type:"submit",class:"btn-primary"}," Enregistrer ",-1))])],32)])])])):c("",!0)])])}const Ps=k(_,[["render",Ss]]);export{Ps as default};
