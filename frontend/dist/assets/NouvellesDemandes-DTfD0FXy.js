import{_ as h,r as S,c,o as i,b as e,W as w,i as C,h as g,v as L,m as k,e as F,F as v,j as D,t as u,n as N,f as m,q as b}from"./index-C-Ksv_Lv.js";import{D as V}from"./DemandeDetails-DFwU9D79.js";const B={name:"NouvellesDemandes",components:{DemandeDetails:V},setup(){const l=m(""),s=m(""),d=m(null),o=m([{id:1,nom:"Jean Dupont",email:"jean.dupont@email.com",structure:"Direction des Systèmes d'Information",typeStage:"Stage académique",dateSoumission:"2024-03-15",status:"accepte",telephone:"+229 97000000",formation:"Licence Informatique",dateDebut:"2024-06-01",dateFin:"2024-08-31",documents:[{nom:"CV",type:"PDF",url:"/documents/cv.pdf"},{nom:"Lettre de motivation",type:"PDF",url:"/documents/lettre.pdf"},{nom:"Attestation de scolarité",type:"PDF",url:"/documents/attestation.pdf"}]},{id:2,nom:"Marie Martin",email:"marie.martin@email.com",structure:"Direction Générale du Budget",typeStage:"Stage professionnel",dateSoumission:"2024-03-14",status:"refuse"}]),x=b(()=>{const t={};return o.value.forEach(a=>{t[a.structure]||(t[a.structure]=[]),t[a.structure].push(a)}),t}),f=b(()=>{let t=o.value;return l.value&&(t=t.filter(a=>a.nom.toLowerCase().includes(l.value.toLowerCase())||a.email.toLowerCase().includes(l.value.toLowerCase())||a.structure.toLowerCase().includes(l.value.toLowerCase())||a.typeStage.toLowerCase().includes(l.value.toLowerCase()))),s.value&&(t=t.filter(a=>a.status===s.value)),t});return{searchQuery:l,filterStatus:s,filteredDemandes:f,demandesParStructure:x,formatDate:t=>new Date(t).toLocaleDateString("fr-FR"),getStatusClass:t=>({nouveau:"bg-blue-100 text-blue-800",en_cours:"bg-yellow-100 text-yellow-800",confirme:"bg-green-100 text-green-800",refuse:"bg-red-100 text-red-800"})[t]||"",getStatusLabel:t=>({nouveau:"Nouveau",en_cours:"En cours",confirme:"Confirmé",refuse:"Refusé"})[t]||t,viewDetails:t=>{d.value=t},selectedDemande:d,closeDetails:()=>{d.value=null}}}},P={class:"p-4"},E={class:"bg-white rounded-lg shadow"},M={class:"p-4 border-b"},T={class:"flex justify-between items-center"},j={class:"flex items-center space-x-4"},q={class:"overflow-x-auto"},Q={class:"text-xl font-semibold mb-4 px-6 text-primary"},R={class:"min-w-full divide-y divide-gray-200"},A={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4"},I={class:"text-sm font-medium text-gray-900"},U={class:"text-sm text-gray-500"},z={class:"px-6 py-4 text-sm text-gray-500"},J={class:"px-6 py-4 text-sm text-gray-500"},W={class:"px-6 py-4"},H={class:"px-6 py-4 text-sm font-medium"},K=["onClick"];function O(l,s,d,o,x,f){const y=S("DemandeDetails");return i(),c("div",P,[s[6]||(s[6]=e("h1",{class:"text-2xl text-green-800 font-bold mb-6"},"Demandes Classées",-1)),e("div",E,[e("div",M,[e("div",T,[e("div",j,[g(e("input",{type:"text",placeholder:"Rechercher une demande...",class:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary","onUpdate:modelValue":s[0]||(s[0]=n=>o.searchQuery=n)},null,512),[[L,o.searchQuery]]),g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>o.filterStatus=n),class:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"},s[2]||(s[2]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"nouveau"},"Nouveau",-1)]),512),[[k,o.filterStatus]])]),s[3]||(s[3]=e("button",{class:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-700"},[e("i",{class:"fas fa-download mr-2"}),F("Exporter ")],-1))])]),e("div",q,[(i(!0),c(v,null,D(o.demandesParStructure,(n,p)=>(i(),c("div",{key:p,class:"mb-8"},[e("h2",Q,u(p),1),e("table",R,[s[5]||(s[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Stagiaire"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type de Stage"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",A,[(i(!0),c(v,null,D(n,r=>(i(),c("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",G,[e("div",I,u(r.nom),1),e("div",U,u(r.email),1)]),e("td",z,u(r.typeStage),1),e("td",J,u(o.formatDate(r.dateSoumission)),1),e("td",W,[e("span",{class:N(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",o.getStatusClass(r.status)])},u(o.getStatusLabel(r.status)),3)]),e("td",H,[e("button",{onClick:_=>o.viewDetails(r),class:"text-primary hover:text-primary-dark"},s[4]||(s[4]=[e("i",{class:"fas fa-eye"},null,-1)]),8,K)])]))),128))])])]))),128))])]),o.selectedDemande?(i(),w(y,{key:0,demande:o.selectedDemande,onClose:o.closeDetails},null,8,["demande","onClose"])):C("",!0)])}const Z=h(B,[["render",O]]);export{Z as default};
