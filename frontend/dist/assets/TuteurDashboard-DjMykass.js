import{_ as M,r as _,c as i,o as d,i as C,b as e,n as u,a as I,z as V,d as n,w as c,e as r,F as E,j as S,t as b,u as j,A as z,f as x,g as A,p as B}from"./index-C-Ksv_Lv.js";const T="https://ui-avatars.com/api/?name=Utilisateur&background=7e3af2&color=fff&size=128",D={name:"TuteurDashboard",setup(){const f=j(),t=z(),m=x(!1),s=x(!1),p=x(!1),w=x([{title:"Nouveau stagiaire assigné",message:"Un nouveau stagiaire a été assigné à votre supervision",time:"Il y a 2 heures",icon:"fas fa-user-graduate",iconBg:"bg-blue-100",iconColor:"text-blue-500"},{title:"Thème approuvé",message:"Votre thème proposé a été approuvé par la structure",time:"Il y a 1 jour",icon:"fas fa-check-circle",iconBg:"bg-green-100",iconColor:"text-green-500"},{title:"Rappel d'évaluation",message:"N'oubliez pas d'évaluer vos stagiaires avant la fin de la semaine",time:"Il y a 2 jours",icon:"fas fa-bell",iconBg:"bg-yellow-100",iconColor:"text-yellow-500"}]),l=()=>{m.value=!m.value};A(()=>{document.addEventListener("click",a=>{a.target.closest(".relative")||(m.value=!1)})});const h=x([{id:1,nom:"Michel Wilson",avatar:"https://ui-avatars.com/api/?name=Michel+Wilson",date:"5 novembre 2024",type:"Généraliste",statut:"Nouveau patient",montant:"150 DH"},{id:2,nom:"Charlotte Reed",avatar:"https://ui-avatars.com/api/?name=Charlotte+Reed",date:"3 novembre 2024",type:"Généraliste",statut:"Vieux patient",montant:"200 DH"},{id:3,nom:"Steve Moore",avatar:"https://ui-avatars.com/api/?name=Steve+Moore",date:"2 novembre 2024",type:"Urgence",statut:"En attente",montant:"250 DH"}]),v=a=>({"Nouveau patient":"bg-green-100 text-green-800","Vieux patient":"bg-blue-100 text-blue-800","En attente":"bg-yellow-100 text-yellow-800"})[a]||"bg-gray-100 text-gray-800",y=async()=>{await f.dispatch("logout"),t.push("/login")};A(async()=>{await g()});const g=async()=>{try{const a=await f.dispatch("tutor/getAssignedInterns");console.log("Stagiaires affectés:",a),s.value=Array.isArray(a)&&a.length>0}catch(a){console.error("Erreur lors de la récupération des stagiaires affectés:",a),s.value=!1}};return B(()=>f.state.tutor.assignedInterns,async a=>{await g()},{deep:!0}),{store:f,patients:h,getStatusClass:v,logout:y,showNotifications:m,recentNotifications:w,toggleNotifications:l,hasAssignedInterns:s,handleTutorMenuClick:a=>{if(!s.value){p.value=!0,setTimeout(()=>{p.value=!1},5e3);return}t.push(a)},showToast:p,fetchAssignedInterns:g,getAvatarUrl:a=>a?a.startsWith("http://")||a.startsWith("https://")?a:`http://localhost:3002/uploads/${a}`:T,onAvatarError:a=>{a.target.src=T}}}},U={class:"min-h-screen bg-gray-100"},R={class:"bg-white rounded-lg shadow-lg p-4 border-l-4 border-yellow-500"},W={class:"flex items-center"},H={class:"ml-auto pl-3"},L={class:"bg-white border-b fixed top-0 left-0 right-0 z-50"},F={class:"px-4 py-4 flex justify-between items-center"},G={class:"flex items-center space-x-4"},P={class:"relative"},O={key:0,class:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-1 z-50"},q={class:"px-4 py-2 border-b border-gray-200"},J={class:"flex justify-between items-center"},K={class:"max-h-96 overflow-y-auto"},Q={class:"flex items-start"},X={class:"flex-shrink-0"},Y={class:"ml-3"},Z={class:"text-sm font-medium text-gray-900"},$={class:"text-sm text-gray-500"},tt={class:"text-xs text-gray-400"},et={class:"flex pt-20"},st={class:"w-64 bg-white shadow-lg fixed left-0 top-20 bottom-0 flex flex-col"},at={class:"p-4 border-b"},ot={class:"flex items-center"},rt={class:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},lt=["src"],nt={key:1,class:"fas fa-user text-gray-400 text-3xl"},it={class:"ml-3"},dt={class:"font-medium"},ut={class:"flex-1 overflow-y-auto h-[calc(100vh-8rem)]"},ct={class:"space-y-2 p-4"},gt={class:"flex-1 ml-64"};function ft(f,t,m,s,p,w){var v,y,g;const l=_("router-link"),h=_("router-view");return d(),i("div",U,[s.showToast?(d(),i("div",{key:0,class:u(["fixed top-4 right-4 z-[9999] transform transition-all duration-300 ease-in-out",{"translate-x-0 opacity-100":s.showToast,"translate-x-full opacity-0":!s.showToast}])},[e("div",R,[e("div",W,[t[9]||(t[9]=I('<div class="flex-shrink-0" data-v-39855168><i class="fas fa-exclamation-circle text-yellow-500 text-xl" data-v-39855168></i></div><div class="ml-3" data-v-39855168><p class="text-sm font-medium text-gray-900" data-v-39855168>Accès restreint</p><p class="text-sm text-gray-500" data-v-39855168>Vous devez avoir des stagiaires affectés pour accéder à cette fonctionnalité.</p></div>',2)),e("div",H,[e("button",{onClick:t[0]||(t[0]=o=>s.showToast=!1),class:"text-gray-400 hover:text-gray-500"},t[8]||(t[8]=[e("i",{class:"fas fa-times"},null,-1)]))])])])],2)):C("",!0),e("header",L,[e("div",F,[t[14]||(t[14]=e("div",{class:"flex items-center gap-4"},[e("img",{src:V,alt:"Logo",class:"h-12 w-auto"})],-1)),e("div",G,[e("div",P,[e("button",{onClick:t[1]||(t[1]=(...o)=>s.toggleNotifications&&s.toggleNotifications(...o)),class:"p-2 text-gray-600 hover:text-gray-800 inline-block"},t[10]||(t[10]=[e("i",{class:"fas fa-bell"},null,-1),e("span",{class:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"},null,-1)])),s.showNotifications?(d(),i("div",O,[e("div",q,[e("div",J,[t[12]||(t[12]=e("h3",{class:"font-semibold text-gray-800"},"Notifications",-1)),n(l,{to:"/dashboard/tuteur/notifications",class:"text-sm text-primary hover:text-primary-dark"},{default:c(()=>t[11]||(t[11]=[r(" Voir tout ")])),_:1})])]),e("div",K,[(d(!0),i(E,null,S(s.recentNotifications,(o,k)=>(d(),i("div",{key:k,class:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0"},[e("div",Q,[e("div",X,[e("span",{class:u(["w-8 h-8 rounded-full flex items-center justify-center",o.iconBg,o.iconColor])},[e("i",{class:u(o.icon)},null,2)],2)]),e("div",Y,[e("p",Z,b(o.title),1),e("p",$,b(o.message),1),e("span",tt,b(o.time),1)])])]))),128))])])):C("",!0)]),e("button",{onClick:t[2]||(t[2]=(...o)=>s.logout&&s.logout(...o)),class:"flex items-center text-gray-600 hover:text-gray-800"},t[13]||(t[13]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),e("span",null,"Déconnexion",-1)]))])])]),e("div",et,[e("aside",st,[e("div",at,[e("div",ot,[e("div",rt,[(v=s.store.state.user)!=null&&v.avatar?(d(),i("img",{key:0,src:s.getAvatarUrl((y=s.store.state.user)==null?void 0:y.avatar),alt:"Profile",class:"h-12 w-12 rounded-full object-cover",onError:t[3]||(t[3]=(...o)=>s.onAvatarError&&s.onAvatarError(...o))},null,40,lt)):(d(),i("i",nt))]),e("div",it,[e("p",dt,b((g=s.store.state.user)==null?void 0:g.name),1),t[15]||(t[15]=e("p",{class:"text-sm text-gray-500"},"Tuteur de Stage",-1))])])]),e("div",ut,[e("nav",ct,[n(l,{to:"/dashboard/tuteur",class:"flex items-center px-4 py-2 text-primary bg-blue-50 rounded-lg"},{default:c(()=>t[16]||(t[16]=[e("i",{class:"fas fa-home mr-3"},null,-1),r(" Tableau de bord ")])),_:1}),t[26]||(t[26]=e("h3",{class:"px-4 py-2 text-sm font-semibold text-slate-500 uppercase"},"Agents",-1)),n(l,{to:"/dashboard/tuteur/sous-structure",class:"flex items-center px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"},{default:c(()=>t[17]||(t[17]=[e("i",{class:"fas fa-sitemap mr-3"},null,-1),r(" Sous-structure ")])),_:1}),n(l,{to:"/dashboard/tuteur/affectation",class:"flex items-center px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"},{default:c(()=>t[18]||(t[18]=[e("i",{class:"fas fa-user-plus mr-3"},null,-1),r(" Affectation ")])),_:1}),n(l,{to:"/dashboard/tuteur/organigramme",class:"flex items-center px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"},{default:c(()=>t[19]||(t[19]=[e("i",{class:"fas fa-project-diagram mr-3"},null,-1),r(" Organigramme ")])),_:1}),t[27]||(t[27]=e("h3",{class:"px-4 py-2 text-sm font-semibold text-slate-500 uppercase mt-4"},"Tuteurs",-1)),e("div",{onClick:t[4]||(t[4]=o=>s.handleTutorMenuClick("/dashboard/tuteur/stagiaires")),class:u(["flex items-center px-4 py-2 rounded-lg cursor-pointer",s.hasAssignedInterns?"text-gray-600 hover:bg-gray-100":"text-gray-400 cursor-not-allowed opacity-50"])},t[20]||(t[20]=[e("i",{class:"fas fa-users mr-3"},null,-1),r(" Mes Stagiaires ")]),2),e("div",{onClick:t[5]||(t[5]=o=>s.handleTutorMenuClick("/dashboard/tuteur/messages")),class:u(["flex items-center px-4 py-2 rounded-lg cursor-pointer",s.hasAssignedInterns?"text-gray-600 hover:bg-gray-100":"text-gray-400 cursor-not-allowed opacity-50"])},t[21]||(t[21]=[e("i",{class:"fas fa-envelope mr-3"},null,-1),r(" Messages ")]),2),e("div",{onClick:t[6]||(t[6]=o=>s.handleTutorMenuClick("/dashboard/tuteur/themes")),class:u(["flex items-center px-4 py-2 rounded-lg cursor-pointer",s.hasAssignedInterns?"text-gray-600 hover:bg-gray-100":"text-gray-400 cursor-not-allowed opacity-50"])},t[22]||(t[22]=[e("i",{class:"fas fa-bookmark mr-3"},null,-1),r(" Thèmes ")]),2),e("div",{onClick:t[7]||(t[7]=o=>s.handleTutorMenuClick("/dashboard/tuteur/evaluation")),class:u(["flex items-center px-4 py-2 rounded-lg cursor-pointer",s.hasAssignedInterns?"text-gray-600 hover:bg-gray-100":"text-gray-400 cursor-not-allowed opacity-50"])},t[23]||(t[23]=[e("i",{class:"fas fa-star mr-3"},null,-1),r(" Évaluation ")]),2),t[28]||(t[28]=e("h3",{class:"px-4 py-2 text-sm font-semibold text-slate-500 uppercase mt-4"},"Configurations",-1)),n(l,{to:"/dashboard/tuteur/notifications",class:"flex items-center px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"},{default:c(()=>t[24]||(t[24]=[e("i",{class:"fas fa-bell mr-3"},null,-1),r(" Notifications ")])),_:1}),n(l,{to:"/dashboard/tuteur/parametres",class:"flex items-center px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"},{default:c(()=>t[25]||(t[25]=[e("i",{class:"fas fa-cog mr-3"},null,-1),r(" Paramètres ")])),_:1})])])]),e("div",gt,[n(h)])])])}const pt=M(D,[["render",ft],["__scopeId","data-v-39855168"]]);export{pt as default};
