import{_ as h,c as i,o as r,b as s,t as a,F as b,j as p,n as v,u as y,f as c,g as w}from"./index-C-Ksv_Lv.js";import{g as D,a as k}from"./statistics.service-BiX3GDSV.js";const T={name:"Overview",setup(){const f=y(),t=c(!0),u=c({}),e=c([]),m=c(null),g=d=>{const l=new Date(d),x=Math.abs(new Date-l),n=Math.ceil(x/(1e3*60*60*24));return n===1?"Il y a 1 jour":n<7?`Il y a ${n} jours`:n<30?`Il y a ${Math.floor(n/7)} semaines`:`Il y a ${Math.floor(n/30)} mois`},o=async()=>{var d;try{t.value=!0;const l=(d=f.state.user)==null?void 0:d.id;if(!l)throw new Error("ID du tuteur non trouvé");const[_,x]=await Promise.all([D(l),k(l)]);u.value=_,e.value=x}catch(l){console.error("Erreur lors du chargement du tableau de bord:",l),m.value="Erreur lors du chargement des données"}finally{t.value=!1}};return w(()=>{o()}),{loading:t,stats:u,activities:e,error:m,formatDate:g}}},E={class:"p-6"},I={key:0,class:"flex justify-center items-center py-12"},S={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},A={class:"bg-white rounded-lg p-6 shadow-sm"},M={class:"flex items-center"},j={class:"ml-4"},B={class:"flex items-baseline"},O={class:"text-2xl font-semibold"},C={class:"text-green-500 text-sm ml-2"},F={class:"bg-white rounded-lg p-6 shadow-sm"},z={class:"flex items-center"},L={class:"ml-4"},N={class:"flex items-baseline"},P={class:"text-2xl font-semibold"},R={class:"bg-white rounded-lg p-6 shadow-sm"},V={class:"flex items-center"},$={class:"ml-4"},q={class:"flex items-baseline"},G={class:"text-2xl font-semibold"},H={class:"text-sm text-gray-500 ml-2"},J={class:"bg-white rounded-lg shadow-sm"},K={class:"p-6"},Q={key:0,class:"text-center py-8 text-gray-500"},U={key:1,class:"space-y-4"},W={class:"ml-4"},X={class:"text-sm font-medium"},Y={class:"text-xs text-gray-500"},Z={class:"text-xs text-gray-400"};function ss(f,t,u,e,m,g){return r(),i("div",E,[t[10]||(t[10]=s("div",{class:"mb-6"},[s("h1",{class:"text-2xl font-bold text-gray-800"},"Tableau de bord")],-1)),e.loading?(r(),i("div",I,t[0]||(t[0]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)]))):(r(),i("div",S,[s("div",A,[s("div",M,[t[2]||(t[2]=s("div",{class:"rounded-full p-3 bg-primary-light"},[s("i",{class:"fas fa-users text-primary text-xl"})],-1)),s("div",j,[t[1]||(t[1]=s("h4",{class:"text-gray-500 text-sm"},"Total Stagiaires",-1)),s("div",B,[s("p",O,a(e.stats.totalStagiaires||0),1),s("p",C,"+"+a(e.stats.tauxEvaluation||0)+"%",1)])])])]),s("div",F,[s("div",z,[t[5]||(t[5]=s("div",{class:"rounded-full p-3 bg-blue-100"},[s("i",{class:"fas fa-user-graduate text-blue-600 text-xl"})],-1)),s("div",L,[t[4]||(t[4]=s("h4",{class:"text-gray-500 text-sm"},"Stagiaires Actifs",-1)),s("div",N,[s("p",P,a(e.stats.stagiairesActifs||0),1),t[3]||(t[3]=s("span",{class:"text-sm text-gray-500 ml-2"},"En cours",-1))])])])]),s("div",R,[s("div",V,[t[7]||(t[7]=s("div",{class:"rounded-full p-3 bg-green-100"},[s("i",{class:"fas fa-check-circle text-green-600 text-xl"})],-1)),s("div",$,[t[6]||(t[6]=s("h4",{class:"text-gray-500 text-sm"},"Stages Terminés",-1)),s("div",q,[s("p",G,a(e.stats.stagiairesTermines||0),1),s("span",H,a(e.stats.tauxCompletion||0)+"%",1)])])])])])),s("div",J,[s("div",K,[t[9]||(t[9]=s("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Activités Récentes",-1)),e.activities.length===0?(r(),i("div",Q,t[8]||(t[8]=[s("i",{class:"fas fa-inbox text-4xl mb-4"},null,-1),s("p",null,"Aucune activité récente",-1)]))):(r(),i("div",U,[(r(!0),i(b,null,p(e.activities,o=>(r(),i("div",{key:`${o.type}-${o.date}`,class:"flex items-center p-4 border rounded-lg"},[s("div",{class:v(`rounded-full ${o.color} p-2`)},[s("i",{class:v(o.icon)},null,2)],2),s("div",W,[s("p",X,a(o.title),1),s("p",Y,a(o.description),1),s("p",Z,a(e.formatDate(o.date)),1)])]))),128))]))])])])}const os=h(T,[["render",ss]]);export{os as default};
