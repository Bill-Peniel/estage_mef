import{_ as y,c as u,o as p,b as s,i as g,t as w,l as c,h as n,v as a,u as P,f as d,U as k,N as f}from"./index-C-Ksv_Lv.js";const M={name:"StructureProfil",setup(){P();const t=d({nom:"",prenom:"",email:"",telephone:""}),e=d({old:"",new:"",confirm:""}),i=d(""),l=d(""),m=()=>{var v,b;const r=k.getCurrentUser();r&&(t.value.nom=((v=r.name)==null?void 0:v.split(" ")[1])||"",t.value.prenom=((b=r.name)==null?void 0:b.split(" ")[0])||"",t.value.email=r.email||"",t.value.telephone=r.telephone||"")};return m(),{profile:t,passwords:e,saveProfile:async()=>{i.value="",l.value="";try{await f.updateProfile({nom:t.value.nom,prenom:t.value.prenom,telephone:t.value.telephone}),t.value.email&&await f.updateEmail(t.value.email),e.value.new&&e.value.new===e.value.confirm&&await f.updatePassword({oldPassword:e.value.old,newPassword:e.value.new}),i.value="Profil mis à jour avec succès.",setTimeout(()=>{i.value=""},4e3)}catch(r){l.value=(r==null?void 0:r.message)||"Erreur lors de la sauvegarde.",setTimeout(()=>{l.value=""},6e3),console.error("Erreur lors de la sauvegarde:",r)}},resetForm:()=>{m(),e.value={old:"",new:"",confirm:""}},successMessage:i,errorMessage:l}}},U={class:"p-6"},V={key:0,class:"mb-4 p-3 rounded bg-green-100 text-green-800 border border-green-300"},E={key:1,class:"mb-4 p-3 rounded bg-red-100 text-red-800 border border-red-300"},S={class:"bg-white rounded-lg shadow-sm p-6 max-w-2xl"},C={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N={class:"md:col-span-2"},F={class:"md:col-span-2"},T={class:"space-y-4"},q={class:"flex justify-end space-x-3"};function B(t,e,i,l,m,x){return p(),u("div",U,[e[18]||(e[18]=s("h1",{class:"text-2xl font-bold mb-6"},"Mon Profil",-1)),l.successMessage?(p(),u("div",V,w(l.successMessage),1)):g("",!0),l.errorMessage?(p(),u("div",E,w(l.errorMessage),1)):g("",!0),s("div",S,[s("form",{onSubmit:e[8]||(e[8]=c((...o)=>l.saveProfile&&l.saveProfile(...o),["prevent"])),class:"space-y-6"},[s("div",C,[s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nom ",-1)),n(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>l.profile.nom=o),class:"input-field",required:""},null,512),[[a,l.profile.nom]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Prénom ",-1)),n(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>l.profile.prenom=o),class:"input-field",required:""},null,512),[[a,l.profile.prenom]])]),s("div",N,[e[11]||(e[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email ",-1)),n(s("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>l.profile.email=o),class:"input-field",required:""},null,512),[[a,l.profile.email]])]),s("div",F,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Téléphone ",-1)),n(s("input",{type:"tel","onUpdate:modelValue":e[3]||(e[3]=o=>l.profile.telephone=o),class:"input-field"},null,512),[[a,l.profile.telephone]])])]),s("div",T,[e[16]||(e[16]=s("h3",{class:"text-lg font-semibold"},"Changer le mot de passe",-1)),s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Ancien mot de passe ",-1)),n(s("input",{type:"password","onUpdate:modelValue":e[4]||(e[4]=o=>l.passwords.old=o),class:"input-field"},null,512),[[a,l.passwords.old]])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nouveau mot de passe ",-1)),n(s("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=o=>l.passwords.new=o),class:"input-field"},null,512),[[a,l.passwords.new]])]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmer le nouveau mot de passe ",-1)),n(s("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=o=>l.passwords.confirm=o),class:"input-field"},null,512),[[a,l.passwords.confirm]])])]),s("div",q,[s("button",{type:"button",onClick:e[7]||(e[7]=(...o)=>l.resetForm&&l.resetForm(...o)),class:"btn-outline"}," Annuler "),e[17]||(e[17]=s("button",{type:"submit",class:"btn-primary"}," Enregistrer les modifications ",-1))])],32)])])}const A=y(M,[["render",B]]);export{A as default};
