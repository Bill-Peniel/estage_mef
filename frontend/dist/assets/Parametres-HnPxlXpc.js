import{_ as h,c as l,o as d,b as t,h as o,v as m,i as x,e as c,x as S,F as V,j as C,I,f as b,g as j}from"./index-C-Ksv_Lv.js";const g="dpaf_settings",D={general:{maxDuration:6,maxStagiairesPerStructure:5,responseDelay:7},notifications:{newRequests:!0,endingInternships:!0,evaluations:!0},documents:[{name:"Lettre de motivation"},{name:"CV"},{name:"Carte étudiant"}],periods:{startDate:new Date().toISOString().split("T")[0],endDate:new Date(new Date().getFullYear(),11,31).toISOString().split("T")[0],allowFlexibleDates:!1}},f={async getSettings(){try{const a=localStorage.getItem(g);return a?JSON.parse(a):D}catch(a){return console.error("Erreur lors de la récupération des paramètres:",a),D}},async updateGeneralSettings(a){try{const i={...await this.getSettings(),general:a};return localStorage.setItem(g,JSON.stringify(i)),{success:!0,data:a}}catch(e){throw console.error("Erreur lors de la mise à jour des paramètres généraux:",e),e}},async updateNotificationSettings(a){try{const i={...await this.getSettings(),notifications:a};return localStorage.setItem(g,JSON.stringify(i)),{success:!0,data:a}}catch(e){throw console.error("Erreur lors de la mise à jour des paramètres de notification:",e),e}},async updateRequiredDocuments(a){try{const i={...await this.getSettings(),documents:a};return localStorage.setItem(g,JSON.stringify(i)),{success:!0,data:a}}catch(e){throw console.error("Erreur lors de la mise à jour des documents requis:",e),e}},async updatePeriodSettings(a){try{const i={...await this.getSettings(),periods:a};return localStorage.setItem(g,JSON.stringify(i)),{success:!0,data:a}}catch(e){throw console.error("Erreur lors de la mise à jour des périodes:",e),e}},resetSettings(){return localStorage.removeItem(g),D}},q={name:"Parametres",setup(){const a=I(),e=b(!1),i=b({maxDuration:6,maxStagiairesPerStructure:5,responseDelay:7}),s=b({newRequests:!0,endingInternships:!0,evaluations:!0}),u=b([{name:"Lettre de motivation"},{name:"CV"},{name:"Carte étudiant"}]),v=b({startDate:"",endDate:"",allowFlexibleDates:!1}),r=async()=>{try{e.value=!0;const n=await f.getSettings();n.general&&(i.value=n.general),n.notifications&&(s.value=n.notifications),n.documents&&(u.value=n.documents),n.periods&&(v.value=n.periods)}catch(n){console.error("Erreur lors du chargement des paramètres:",n),a.error("Erreur lors du chargement des paramètres")}finally{e.value=!1}},p=()=>{u.value.push({name:""})},y=n=>{u.value.splice(n,1)},w=async()=>{try{e.value=!0,await f.updateGeneralSettings(i.value),a.success("Paramètres généraux mis à jour avec succès")}catch(n){console.error("Erreur lors de la sauvegarde des paramètres généraux:",n),a.error("Erreur lors de la sauvegarde des paramètres généraux")}finally{e.value=!1}},k=async()=>{try{e.value=!0,await f.updateNotificationSettings(s.value),a.success("Paramètres de notification mis à jour avec succès")}catch(n){console.error("Erreur lors de la sauvegarde des paramètres de notification:",n),a.error("Erreur lors de la sauvegarde des paramètres de notification")}finally{e.value=!1}},E=async()=>{try{e.value=!0;const n=u.value.filter(N=>N.name.trim()!=="");await f.updateRequiredDocuments(n),a.success("Liste des documents mise à jour avec succès")}catch(n){console.error("Erreur lors de la sauvegarde des documents requis:",n),a.error("Erreur lors de la sauvegarde des documents requis")}finally{e.value=!1}},P=async()=>{try{e.value=!0,await f.updatePeriodSettings(v.value),a.success("Périodes de stage mises à jour avec succès")}catch(n){console.error("Erreur lors de la sauvegarde des périodes:",n),a.error("Erreur lors de la sauvegarde des périodes")}finally{e.value=!1}};return j(()=>{r()}),{settings:i,notifications:s,requiredDocs:u,periodSettings:v,loading:e,addDocument:p,removeDocument:y,saveGeneralSettings:w,saveNotificationSettings:k,saveDocumentSettings:E,savePeriodSettings:P}}},U={class:"p-6"},_={key:0,class:"flex justify-center items-center h-64"},O={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},F={class:"bg-white rounded-lg shadow-sm p-6"},R={class:"space-y-4"},G=["disabled"],T=["disabled"],J=["disabled"],L={class:"mt-6"},A=["disabled"],B={key:0,class:"mr-2"},M={class:"bg-white rounded-lg shadow-sm p-6"},Y={class:"space-y-4"},K={class:"flex items-center"},z=["disabled"],H={class:"flex items-center"},Q=["disabled"],W={class:"flex items-center"},X=["disabled"],Z={class:"mt-6"},$=["disabled"],ee={key:0,class:"mr-2"},te={class:"bg-white rounded-lg shadow-sm p-6"},se={class:"space-y-4"},re=["onUpdate:modelValue","disabled"],ae=["onClick","disabled"],ne=["disabled"],ie={class:"mt-6"},oe=["disabled"],le={key:0,class:"mr-2"},de={class:"bg-white rounded-lg shadow-sm p-6"},ue={class:"space-y-4"},me={class:"grid grid-cols-2 gap-4"},ge=["disabled"],ce=["disabled"],be={class:"flex items-center"},fe=["disabled"],ve={class:"mt-6"},pe=["disabled"],ye={key:0,class:"mr-2"};function xe(a,e,i,s,u,v){return d(),l("div",U,[e[39]||(e[39]=t("h1",{class:"text-2xl text-green-800 font-bold mb-6"},"Paramètres",-1)),s.loading?(d(),l("div",_,e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)]))):(d(),l("div",O,[t("div",F,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold mb-4"},"Paramètres généraux",-1)),t("div",R,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Durée maximale de stage (mois) ",-1)),o(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=r=>s.settings.maxDuration=r),min:"1",max:"12",class:"input-field",disabled:s.loading},null,8,G),[[m,s.settings.maxDuration,void 0,{number:!0}]]),e[16]||(e[16]=t("p",{class:"text-sm text-gray-500 mt-1"},"Entre 1 et 12 mois",-1))]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre maximum de stagiaires par structure ",-1)),o(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=r=>s.settings.maxStagiairesPerStructure=r),min:"1",class:"input-field",disabled:s.loading},null,8,T),[[m,s.settings.maxStagiairesPerStructure,void 0,{number:!0}]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Délai de réponse aux demandes (jours) ",-1)),o(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=r=>s.settings.responseDelay=r),min:"1",class:"input-field",disabled:s.loading},null,8,J),[[m,s.settings.responseDelay,void 0,{number:!0}]])])]),t("div",L,[t("button",{onClick:e[3]||(e[3]=(...r)=>s.saveGeneralSettings&&s.saveGeneralSettings(...r)),class:"btn-primary",disabled:s.loading},[s.loading?(d(),l("span",B,e[19]||(e[19]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):x("",!0),e[20]||(e[20]=c(" Enregistrer les modifications "))],8,A)])]),t("div",M,[e[27]||(e[27]=t("h2",{class:"text-lg font-semibold mb-4"},"Paramètres de notification",-1)),t("div",Y,[t("div",K,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=r=>s.notifications.newRequests=r),class:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",disabled:s.loading},null,8,z),[[S,s.notifications.newRequests]]),e[22]||(e[22]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Nouvelles demandes de stage ",-1))]),t("div",H,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=r=>s.notifications.endingInternships=r),class:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",disabled:s.loading},null,8,Q),[[S,s.notifications.endingInternships]]),e[23]||(e[23]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Stages arrivant à terme ",-1))]),t("div",W,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=r=>s.notifications.evaluations=r),class:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",disabled:s.loading},null,8,X),[[S,s.notifications.evaluations]]),e[24]||(e[24]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Nouvelles évaluations ",-1))])]),t("div",Z,[t("button",{onClick:e[7]||(e[7]=(...r)=>s.saveNotificationSettings&&s.saveNotificationSettings(...r)),class:"btn-primary",disabled:s.loading},[s.loading?(d(),l("span",ee,e[25]||(e[25]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):x("",!0),e[26]||(e[26]=c(" Enregistrer les préférences "))],8,$)])]),t("div",te,[e[32]||(e[32]=t("h2",{class:"text-lg font-semibold mb-4"},"Documents requis",-1)),t("div",se,[(d(!0),l(V,null,C(s.requiredDocs,(r,p)=>(d(),l("div",{key:p,class:"flex items-center gap-2"},[o(t("input",{type:"text","onUpdate:modelValue":y=>r.name=y,class:"input-field flex-1",placeholder:"Nom du document",disabled:s.loading},null,8,re),[[m,r.name]]),t("button",{onClick:y=>s.removeDocument(p),class:"text-red-600 hover:text-red-800",disabled:s.loading},e[28]||(e[28]=[t("i",{class:"fas fa-trash"},null,-1)]),8,ae)]))),128)),t("button",{onClick:e[8]||(e[8]=(...r)=>s.addDocument&&s.addDocument(...r)),class:"btn-outline w-full",disabled:s.loading},e[29]||(e[29]=[t("i",{class:"fas fa-plus mr-2"},null,-1),c("Ajouter un document ")]),8,ne)]),t("div",ie,[t("button",{onClick:e[9]||(e[9]=(...r)=>s.saveDocumentSettings&&s.saveDocumentSettings(...r)),class:"btn-primary",disabled:s.loading},[s.loading?(d(),l("span",le,e[30]||(e[30]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):x("",!0),e[31]||(e[31]=c(" Enregistrer la liste "))],8,oe)])]),t("div",de,[e[38]||(e[38]=t("h2",{class:"text-lg font-semibold mb-4"},"Périodes de stage",-1)),t("div",ue,[t("div",me,[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Date de début ",-1)),o(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=r=>s.periodSettings.startDate=r),class:"input-field",disabled:s.loading},null,8,ge),[[m,s.periodSettings.startDate]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Date de fin ",-1)),o(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=r=>s.periodSettings.endDate=r),class:"input-field",disabled:s.loading},null,8,ce),[[m,s.periodSettings.endDate]])])]),t("div",be,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=r=>s.periodSettings.allowFlexibleDates=r),class:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",disabled:s.loading},null,8,fe),[[S,s.periodSettings.allowFlexibleDates]]),e[35]||(e[35]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Autoriser les dates flexibles ",-1))])]),t("div",ve,[t("button",{onClick:e[13]||(e[13]=(...r)=>s.savePeriodSettings&&s.savePeriodSettings(...r)),class:"btn-primary",disabled:s.loading},[s.loading?(d(),l("span",ye,e[36]||(e[36]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):x("",!0),e[37]||(e[37]=c(" Enregistrer les périodes "))],8,pe)])])]))])}const De=h(q,[["render",xe]]);export{De as default};
